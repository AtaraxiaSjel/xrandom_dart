![Generic badge](https://img.shields.io/badge/status-draft-red.svg)
[![Actions Status](https://github.com/rtmigo/xorshift/workflows/unittest/badge.svg?branch=master)](https://github.com/rtmigo/xorshift/actions)
![Generic badge](https://img.shields.io/badge/tested_on-Windows_|_MacOS_|_Ubuntu-blue.svg)
![Generic badge](https://img.shields.io/badge/tested_on-VM_|_JS-blue.svg)

# [xorshift](https://github.com/rtmigo/xorshift)

This library implements [Xorshift](https://en.wikipedia.org/wiki/Xorshift) random number generators
in Dart.

Xorshift algorithms are known among the **fastest random number generators**, requiring very small
code and state.

# Speed

Generating 100 million of random numbers. Time is in milliseconds. Lower is better.

| Class              | nextBool | nextInt | nextDouble | next32 | next64 |
|--------------------|----------|---------|------------|--------|--------|
| Random (dart:math) |   2284   |  2320   |    3227    |   -    |   -    |
| Xorshift32         |   1416   |  1288   |    1323    |  740   |   -    |
| Xorshift64         |   1461   |  2313   |    3671    |  1690  |  2259  |
| Xorshift128        |   1451   |  1959   |    1934    |  1374  |   -    |
| Xorshift128Plus    |   1492   |  2707   |    4079    |  2146  |  3009  |

Made with compiled-to-native executable on AMD A9-9420e processor with Ubuntu 20.04.

# Determinism

Xorshift's classes have a `deterministic` method. By creating an object with this method, you end up with a
generator that produces the same sequence of numbers every time.

``` dart
test('my test', () {
    final sameValuesEachTime = Xorshift.deterministic();
    // results based on randoms are predictable now
    expect(sameValuesEachTime.nextInt(1000), 543);
    expect(sameValuesEachTime.nextInt(1000), 488);
    expect(sameValuesEachTime.nextInt(1000), 284);    
});    
```

You can achieve the same by creating the `Random` with a `seed` argument. However, the unchangeable
seed does not protect you from `dart:math` implementation updates. In contrast to this,
Xorshift is a very specific algorithm. Therefore, the predictability of the
Xorshift's `deterministic`
sequences can be relied upon. *(but not until the library reaches stable release status)*

# Usage

All classes implement the standard `Random` from `dart:math`, so they can be used in the same way.

``` dart
import 'package:xorshift/xorshift.dart';

Random random = Xorshift();
print(random.nextInt(100));
print(random.nextDouble());
```

In addition, they have a `next32()` method that returns an unsigned 32-bit value stored in `int`.
Some classes also have `next64()`. It returns 64-bit random signed `int`. The 64-bit numbers are only
supported on platforms other than JavaScript.

# Compatibility

| Class                            | 64-bit platforms | JavaScript |
|----------------------------------|------------------|------------|
| `Xorshift` aka `Xorshift32`      | yes              | yes        |
| `Xorshift128`                    | yes              | yes        |
| `Xorshift64`                     | yes              | no         |
| `Xorshift128Plus`                | yes              | no         |

The library has been thoroughly tested to match reference numbers generated by C algorithms. The
sources in C are taken directly from scientific publications by George Marsaglia and Sebastiano Vigna,
the inventors of the algorithms. The Xorshift128+ results are also matched to reference values from
JavaScript [xorshift](https://github.com/AndreasMadsen/xorshift) library, that tested the 128+
similarly.

Testing is done in the GitHub Actions cloud on Windows, Ubuntu and macOS in VM and NODE modes.
 
# Classes

| Class             | Algorithm    | Author           | Year |
|-------------------|--------------|------------------|------|
| `Xorshift`        | xorshift32   | George Marsaglia | 2003 |
| `Xorshift32`      | xorshift32   | George Marsaglia | 2003 |
| `Xorshift64`      | xorshift64   | George Marsaglia | 2003 |
| `Xorshift128`     | xorshift128  | George Marsaglia | 2003 |
| `Xorshift128Plus` | xorshift128+ | Sebastiano Vigna | 2015 |

